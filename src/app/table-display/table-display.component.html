<div class="container m-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="text-primary">Données du fichier Excel</h1>
    <div>
   
      <button class="btn btn-secondary me-2" (click)="goBackToUpload()">
        <i class="fas fa-arrow-left"></i> Retour
      </button>
    </div>
  </div>

  <div class="alert alert-info" *ngIf="users.length === 0">
    Aucune donnée trouvée. <a routerLink="/upload">Cliquez ici pour uploader un fichier</a>
  </div>

  <div class="table-responsive" *ngIf="users.length > 0">
    <table class="table table-striped table-hover">
      <thead class="table-dark">
        <tr>
          <!-- Utiliser les colonnes dynamiques -->
          <th *ngFor="let column of getColumnNames()">
            {{ getDisplayName(column) }}
          </th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- Utiliser les données filtrées -->
        <tr *ngFor="let u of getFilteredData(); let i = index">
          <!-- Afficher seulement les colonnes non vides -->
          <td *ngFor="let column of getColumnNames()">
            {{ u[column] }}
          </td>
          <td>
            <div class="btn-group" role="group">
            
        
             <!-- les données filtrées
             <button (click)="sendAllUsersToAPI()" [disabled]="isLoading">
              Send All Data
            </button> -->
            <button (click)="sendData(({ prenom: 'A', Nom: 'test1' }))" [disabled]="isLoading">
              Send User
            </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Informations supplémentaires -->
  <div class="mt-3" *ngIf="users.length > 0">
    <div class="row">
      <div class="col-md-6">
        <small class="text-muted">
          Affichage de {{ users.length }} enregistrement(s) avec {{ getColumnNames().length }} colonne(s) non vide(s)
        </small>
      </div>
    </div>
  </div>
</div>