<div class="container m-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="text-primary">Données du fichier Excel</h1>
    <div>
   
      <button class="btn btn-secondary me-2" (click)="goBackToUpload()">
        <i class="fas fa-arrow-left"></i> Retour
      </button>
    </div>
  </div>

  <div class="alert alert-info" *ngIf="users.length === 0">
    Aucune donnée trouvée. <a routerLink="/upload">Cliquez ici pour uploader un fichier</a>
  </div>

  <div class="table-responsive" *ngIf="users.length > 0">
    <table class="table table-striped table-hover">
      <thead >
        <tr>
          
          <!-- Utiliser les colonnes dynamiques -->
          <th *ngFor="let column of getColumnNames()">
            {{ getDisplayName(column) }}
          </th>

          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- Utiliser les données filtrées -->
        <!-- <tr *ngFor="let u of getFilteredData(); let i = index">

         
          <td *ngFor="let column of getColumnNames()">
            {{ u[column] }}
          </td>
          <td>
            <div class="btn-group" role="group">
            
        
             
            <div *ngFor="let user of users; let i = index">
              <button (click)="selectAndSubmitUser(i)">
               Data
              </button>
            </div>
            </div>
          </td>
        </tr> -->
        <!-- <tr *ngFor="let user of this.dataService.getUsers(); let i = index">
          <td>{{ user.name || 'test' + (i + 1) }}</td>
          <td>
            <button (click)="selectAndSubmitUser(i)" class="btn btn-primary">
              Imprimer
            </button>
          </td>
        </tr> -->
        <tr class = "btn-primary"*ngFor="let user of this.dataService.getUsers(); let i = index">
          <!-- Dynamic columns based on getColumnNames() -->
          <td *ngFor="let column of getColumnNames()">
            {{ user[column] }}
          </td>
          <!-- Action button column -->
          <td>
            <div class="btn-group" role="group">
              <button (click)="selectAndSubmitUser(i)" class="btn btn-primary">
                Imprimer
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Informations supplémentaires -->
  <div class="mt-3" *ngIf="users.length > 0">
    <div class="row">
      <div class="col-md-6">
        <small class="text-muted">
          Affichage de {{ users.length }} enregistrement(s) avec {{ getColumnNames().length }} colonne(s) non vide(s)
        </small>
      </div>
    </div>
  </div>
</div>